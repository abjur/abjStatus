---
title: "GitHub Actions"
output: github_document
# the repository where this repo exists
status_repo: abjur/abjStatus
# list of repositories by owner name and repo
params:
  abjur:
  - obsFase3
  - obsRJRS
  - obsRJRJ 
  #-saudeJFC
  - obsMC
  - obsoc
  - falrec
  - covidTJSP
  - associados
  - auth0_logs
  - relatorioPesquisadores
---


<!-- badges: start -->
[![update-status](https://github.com/abjur/abjStatus/workflows/update-status/badge.svg)](https://github.com/abjur/abjStatus/actions)
<!-- badges: end -->


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE)
library(purrr)
library(dplyr)
library(glue)
```

```{r gh-get-repos}
source("gh-repo-info.R")
repos <- gh_get_repo_status(params)
```

```{r repo-status}
repos %>% 
  dplyr::select_if(negate(is.list)) %>%
  dplyr::arrange(run_conclusion, repo_name) %>% 
  dplyr::mutate(
    commit_message = map_chr(commit_message, ~ strsplit(.x, "\n")[[1]][1]),
    commit_id_6 = substr(commit_id, 1, 6)
  ) %>% 
  dplyr::transmute(
    Repo = glue("[{repo_name}]({html_url_repo})"),
    Stars = stargazers_count,
    Watchers = watchers_count,
    Issues = open_issues_count,
    Forks = forks_count,
    Status = glue("[![]({badge_url})]({html_url_run})"),
    Commit = glue('<a href="{html_url_repo}/commit/{commit_id}" title="{commit_message}">{commit_id_6}</a>')
  ) %>% 
  knitr::kable(escape = FALSE)
```


